<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Patient ID record grouping — uk_patient_id • epidm</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Patient ID record grouping — uk_patient_id"><meta name="description" content="
Assigns a single integer id to records that belong to the same patient by
applying a sequence of deterministic matching stages across common identifiers
(NHS number, hospital number, DOB, name, sex, postcode). Identifiers are
standardised, validated using NHS checksum function, and fuzzy name keys are
used in later stages.
'
Matching is performed in order through the following stages (first match is applied):
NHS number + date of birth
Hospital number + date of birth
NHS number + hospital number
NHS number + surname
Hospital number + surname
Date of birth + surname (only where NHS is invalid/absent)
Sex + full name (forename + surname)
Sex + date of birth + fuzzy name (Soundex; surname + initial)
Date of birth (YYYY-MM) + fuzzy name
Surname/forename + postcode
Name swaps (forename/surname reversed) + date of birth


Use .useStages to restrict which stages are applied (default: 1:11).
The function generates a reproducible id per patient within the sort order;
you can provide .sortOrder (e.g., a date column) to make assignment deterministic.
Validity rules applied:
NHS number validated using the standard checksum (epidm::valid_nhs()).
Hospital number: excludes known placeholders (e.g., &quot;UNKNOWN&quot;, &quot;NO PATIENT ID&quot;).
DOB: excludes proxy or missing dates (&quot;1900-01-01&quot;, &quot;1800-01-01&quot;, NA).
Sex: normalised to &quot;M&quot; / &quot;F&quot;; others → NA.
Names: uppercased, Latin characters normalised; Soundex used for fuzzy matching.


Identifiers are copied over where they are missing or invalid to the grouped
records."><meta property="og:description" content="
Assigns a single integer id to records that belong to the same patient by
applying a sequence of deterministic matching stages across common identifiers
(NHS number, hospital number, DOB, name, sex, postcode). Identifiers are
standardised, validated using NHS checksum function, and fuzzy name keys are
used in later stages.
'
Matching is performed in order through the following stages (first match is applied):
NHS number + date of birth
Hospital number + date of birth
NHS number + hospital number
NHS number + surname
Hospital number + surname
Date of birth + surname (only where NHS is invalid/absent)
Sex + full name (forename + surname)
Sex + date of birth + fuzzy name (Soundex; surname + initial)
Date of birth (YYYY-MM) + fuzzy name
Surname/forename + postcode
Name swaps (forename/surname reversed) + date of birth


Use .useStages to restrict which stages are applied (default: 1:11).
The function generates a reproducible id per patient within the sort order;
you can provide .sortOrder (e.g., a date column) to make assignment deterministic.
Validity rules applied:
NHS number validated using the standard checksum (epidm::valid_nhs()).
Hospital number: excludes known placeholders (e.g., &quot;UNKNOWN&quot;, &quot;NO PATIENT ID&quot;).
DOB: excludes proxy or missing dates (&quot;1900-01-01&quot;, &quot;1800-01-01&quot;, NA).
Sex: normalised to &quot;M&quot; / &quot;F&quot;; others → NA.
Names: uppercased, Latin characters normalised; Soundex used for fuzzy matching.


Identifiers are copied over where they are missing or invalid to the grouped
records."><meta property="og:image" content="/logo.png"><meta name="twitter:card" content="summary"><meta name="twitter:creator" content="@alexbhatt"><meta name="twitter:site" content="@alexbhatt"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">epidm</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.6</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/epidm-function-usage.html">Guide: Staged Patient Matching and Time-based Episode Grouping with EpiDM</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ukhsa-collaboration/epidm/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Patient ID record grouping</h1>
      <small class="dont-index">Source: <a href="https://github.com/ukhsa-collaboration/epidm/blob/master/R/patient_id.R" class="external-link"><code>R/patient_id.R</code></a></small>
      <div class="d-none name"><code>uk_patient_id.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable" class="external-link"><img src="figures/lifecycle-stable.svg" alt="[Stable]"></a></p>
<p>Assigns a <strong>single integer <code>id</code></strong> to records that belong to the same patient by
applying a sequence of <strong>deterministic matching stages</strong> across common identifiers
(NHS number, hospital number, DOB, name, sex, postcode). Identifiers are
standardised, validated using NHS checksum function, and fuzzy name keys are
used in later stages.
'
Matching is performed in order through the following stages (first match is applied):</p><ol><li><p>NHS number + date of birth</p></li>
<li><p>Hospital number + date of birth</p></li>
<li><p>NHS number + hospital number</p></li>
<li><p>NHS number + surname</p></li>
<li><p>Hospital number + surname</p></li>
<li><p>Date of birth + surname (only where NHS is invalid/absent)</p></li>
<li><p>Sex + full name (forename + surname)</p></li>
<li><p>Sex + date of birth + fuzzy name (Soundex; surname + initial)</p></li>
<li><p>Date of birth (YYYY-MM) + fuzzy name</p></li>
<li><p>Surname/forename + postcode</p></li>
<li><p>Name swaps (forename/surname reversed) + date of birth</p></li>
</ol><p>Use <code>.useStages</code> to restrict which stages are applied (default: <code>1:11</code>).
The function generates a reproducible <code>id</code> per patient within the sort order;
you can provide <code>.sortOrder</code> (e.g., a date column) to make assignment deterministic.</p>
<p><strong>Validity rules applied:</strong></p><ul><li><p><strong>NHS number</strong> validated using the standard checksum (<code><a href="valid_nhs.html">epidm::valid_nhs()</a></code>).</p></li>
<li><p><strong>Hospital number</strong>: excludes known placeholders (e.g., <code>"UNKNOWN"</code>, <code>"NO PATIENT ID"</code>).</p></li>
<li><p><strong>DOB</strong>: excludes proxy or missing dates (<code>"1900-01-01"</code>, <code>"1800-01-01"</code>, <code>NA</code>).</p></li>
<li><p><strong>Sex</strong>: normalised to <code>"M"</code> / <code>"F"</code>; others → <code>NA</code>.</p></li>
<li><p><strong>Names</strong>: uppercased, Latin characters normalised; Soundex used for fuzzy matching.</p></li>
</ul><p>Identifiers are copied over where they are missing or invalid to the grouped
records.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">uk_patient_id</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>nhs_number <span class="op">=</span> <span class="st">"nhs_number"</span>, hospital_number <span class="op">=</span> <span class="st">"patient_hospital_number"</span>,</span>
<span>    date_of_birth <span class="op">=</span> <span class="st">"date_of_birth"</span>, sex_mfu <span class="op">=</span> <span class="st">"sex"</span>, forename <span class="op">=</span> <span class="st">"forename"</span>, surname <span class="op">=</span></span>
<span>    <span class="st">"surname"</span>, postcode <span class="op">=</span> <span class="st">"postcode"</span><span class="op">)</span>,</span>
<span>  .useStages <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">11</span><span class="op">)</span>,</span>
<span>  .keepStages <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  .keepValidNHS <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">.sortOrder</span>,</span>
<span>  .forceCopy <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A <code>data.frame</code> or <code>data.table</code> with patient identifiers.</p></dd>


<dt id="arg-id">id<a class="anchor" aria-label="anchor" href="#arg-id"></a></dt>
<dd><p>A <strong>named list</strong> of quoted column names:</p><dl><dt><code>nhs_number</code></dt>
<dd><p>NHS number.</p></dd>

<dt><code>hospital_number</code></dt>
<dd><p>Local patient identifier (hospital number).</p></dd>

<dt><code>date_of_birth</code></dt>
<dd><p>Date of birth.</p></dd>

<dt><code>sex_mfu</code></dt>
<dd><p>Sex/gender (M/F/Unknown).</p></dd>

<dt><code>forename</code></dt>
<dd><p>Forename / first name.</p></dd>

<dt><code>surname</code></dt>
<dd><p>Surname / last name.</p></dd>

<dt><code>postcode</code></dt>
<dd><p>Patient postcode.</p></dd>


</dl></dd>


<dt id="arg--usestages">.useStages<a class="anchor" aria-label="anchor" href="#arg--usestages"></a></dt>
<dd><p>optional, default 1:11; set to 1 if you wish patient ID to
be assigned cases with the same DOB and NHS number, set to 2 if you wish patient
ID to be assigned to cases with the same hospital number (HOS) and DOB, set to
3 if you wish patient ID to be assigned cases with the same NHS and HOS number,
set to 4 if you wish patient ID to be assigned cases with the same NHS number
and surname, set to 5 if you wish patient ID to be assigned cases with the same
hospital number and surname, set to 6 if you wish patient ID to be assigned
cases with the same DOB and surname, set to 7 if you wish patient ID to be
assigned cases with the same sex and full name, set to 8 if you wish patient
ID to be assigned cases with the same sex, DOB and fuzzy name, set to 9 if you
wish patient ID to be assigned cases with the same DOB and fuzzy name, set to
10 if you wish patient ID to be assigned cases with the same name and postcode,
set to 11 if you wish patient ID to be assigned cases with the same first name
or second name in changing order and date of birth.</p></dd>


<dt id="arg--keepstages">.keepStages<a class="anchor" aria-label="anchor" href="#arg--keepstages"></a></dt>
<dd><p>optional, default FALSE; to generate a new column (stageMatch)
to retain the stage information for which the record matched the group.</p></dd>


<dt id="arg--keepvalidnhs">.keepValidNHS<a class="anchor" aria-label="anchor" href="#arg--keepvalidnhs"></a></dt>
<dd><p>optional, default FALSE; set TRUE if you wish to retain
the column with the NHS checksum result stored as a BOOLEAN</p></dd>


<dt id="arg--sortorder">.sortOrder<a class="anchor" aria-label="anchor" href="#arg--sortorder"></a></dt>
<dd><p>optional; a column as a character to allow a sorting
order on the id generation</p></dd>


<dt id="arg--forcecopy">.forceCopy<a class="anchor" aria-label="anchor" href="#arg--forcecopy"></a></dt>
<dd><p>optional, default FALSE; TRUE will force data.table to take a copy
instead of editing the data without reference</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>data.table</code> with the original columns plus:</p><dl><dt><code>id</code></dt>
<dd><p>Integer patient identifier assigned by staged matching.</p></dd>

<dt><code>valid_nhs</code></dt>
<dd><p>(Optional) BOOLEAN NHS checksum flag; included when <code>.keepValidNHS = TRUE</code>.</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="workflow-context">Workflow context<a class="anchor" aria-label="anchor" href="#workflow-context"></a></h2>


<p><code>uk_patient_id()</code> is typically used early to harmonise patient identity
across isolates before downstream tasks such as specimen episode grouping
(<code><a href="group_time.html">group_time()</a></code>), dataset linkage (e.g., to HES/SUS/ECDS), and
epidemiological reporting.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">id_test</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>    record_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>,<span class="fl">2L</span>,<span class="fl">3L</span>,<span class="fl">4L</span>,</span></span>
<span class="r-in"><span>                  <span class="fl">5L</span>,<span class="fl">6L</span>,<span class="fl">7L</span>,<span class="fl">8L</span>,<span class="fl">9L</span>,<span class="fl">10L</span>,<span class="fl">11L</span>,<span class="fl">12L</span>,<span class="fl">13L</span>,<span class="fl">14L</span>,<span class="fl">15L</span>,</span></span>
<span class="r-in"><span>                  <span class="fl">16L</span>,<span class="fl">17L</span>,<span class="fl">18L</span>,<span class="fl">19L</span>,<span class="fl">20L</span>,<span class="fl">21L</span>,<span class="fl">22L</span>,<span class="fl">23L</span>,<span class="fl">24L</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    nhs_number <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">9435754422</span>,</span></span>
<span class="r-in"><span>                   <span class="fl">9435754422</span>,<span class="cn">NA</span>,<span class="fl">9435754422</span>,<span class="fl">5555555555</span>,<span class="cn">NA</span>,</span></span>
<span class="r-in"><span>                   <span class="fl">9435773982</span>,<span class="cn">NA</span>,<span class="fl">9999999999</span>,<span class="cn">NA</span>,<span class="fl">9435773982</span>,<span class="cn">NA</span>,</span></span>
<span class="r-in"><span>                   <span class="fl">9435802508</span>,<span class="fl">9435802508</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,<span class="fl">9435802508</span>,<span class="fl">9435802508</span>,<span class="cn">NA</span>,</span></span>
<span class="r-in"><span>                   <span class="fl">3333333333</span>,<span class="cn">NA</span>,<span class="fl">9999999999</span>,<span class="fl">9435817777</span>,</span></span>
<span class="r-in"><span>                   <span class="fl">9435817777</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    local_patient_identifier <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>,<span class="st">"IG12067"</span>,</span></span>
<span class="r-in"><span>                                 <span class="cn">NA</span>,<span class="cn">NA</span>,<span class="st">"IG12067"</span>,<span class="st">"IG12067"</span>,<span class="st">"KR2535"</span>,<span class="st">"KR2535"</span>,</span></span>
<span class="r-in"><span>                                 <span class="st">"KR2535"</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,<span class="st">"UK8734"</span>,<span class="st">"UK8734"</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,</span></span>
<span class="r-in"><span>                                 <span class="st">"UK8734"</span>,<span class="st">"UK8734"</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,<span class="st">"JH45204"</span>,</span></span>
<span class="r-in"><span>                                 <span class="st">"HS45202"</span>,<span class="st">"HS45202"</span>,<span class="st">"JH45204"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    patient_birth_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1993-07-16"</span>,</span></span>
<span class="r-in"><span>                           <span class="st">"1993-07-16"</span>,<span class="st">"1993-07-16"</span>,<span class="st">"1993-07-16"</span>,</span></span>
<span class="r-in"><span>                           <span class="st">"1993-07-16"</span>,<span class="cn">NA</span>,<span class="st">"1967-02-10"</span>,<span class="cn">NA</span>,<span class="st">"1967-02-10"</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,</span></span>
<span class="r-in"><span>                           <span class="st">"1967-02-10"</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,<span class="st">"1952-10-22"</span>,<span class="st">"1952-10-22"</span>,</span></span>
<span class="r-in"><span>                           <span class="st">"1952-10-22"</span>,<span class="cn">NA</span>,<span class="st">"1947-09-14"</span>,<span class="st">"1947-09-14"</span>,</span></span>
<span class="r-in"><span>                           <span class="st">"1947-09-14"</span>,<span class="st">"1947-09-14"</span>,<span class="st">"1947-09-14"</span>,</span></span>
<span class="r-in"><span>                           <span class="st">"1947-09-14"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    sex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Male"</span>,<span class="st">"Male"</span>,</span></span>
<span class="r-in"><span>            <span class="st">"Male"</span>,<span class="st">"Male"</span>,<span class="cn">NA</span>,<span class="st">"Male"</span>,<span class="st">"Female"</span>,<span class="st">"Female"</span>,</span></span>
<span class="r-in"><span>            <span class="st">"Female"</span>,<span class="st">"Female"</span>,<span class="st">"Female"</span>,<span class="st">"Female"</span>,<span class="st">"Male"</span>,</span></span>
<span class="r-in"><span>            <span class="st">"Male"</span>,<span class="st">"Male"</span>,<span class="st">"Male"</span>,<span class="st">"Male"</span>,<span class="st">"Male"</span>,<span class="st">"Male"</span>,</span></span>
<span class="r-in"><span>            <span class="st">"Male"</span>,<span class="st">"Male"</span>,<span class="st">"Male"</span>,<span class="cn">NA</span>,<span class="st">"Male"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    forename <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>,<span class="st">"DENNIS"</span>,</span></span>
<span class="r-in"><span>                 <span class="cn">NA</span>,<span class="cn">NA</span>,<span class="st">"DENNIS"</span>,<span class="cn">NA</span>,<span class="st">"ELLIE"</span>,<span class="st">"ELLIE"</span>,<span class="cn">NA</span>,</span></span>
<span class="r-in"><span>                 <span class="st">"ELLIE"</span>,<span class="st">"ELLIE"</span>,<span class="st">"ELLIE"</span>,<span class="st">"IAN"</span>,<span class="st">"IAN"</span>,<span class="st">"MALCOLM"</span>,</span></span>
<span class="r-in"><span>                 <span class="st">"IAN"</span>,<span class="st">"IAN"</span>,<span class="cn">NA</span>,<span class="st">"GRANT"</span>,<span class="st">"ALAN"</span>,<span class="st">"ALAN"</span>,<span class="st">"ALAN"</span>,</span></span>
<span class="r-in"><span>                 <span class="st">"GRANT"</span>,<span class="st">"ALAN"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    surname <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>,<span class="st">"NEDRY"</span>,</span></span>
<span class="r-in"><span>                <span class="st">"NEDRY"</span>,<span class="cn">NA</span>,<span class="st">"NEDRY"</span>,<span class="st">"NEDRY"</span>,<span class="st">"SATTLER"</span>,<span class="st">"SATTLER"</span>,</span></span>
<span class="r-in"><span>                <span class="cn">NA</span>,<span class="st">"SATTLER"</span>,<span class="st">"SATTLER"</span>,<span class="st">"SATTLER"</span>,<span class="st">"M"</span>,<span class="cn">NA</span>,</span></span>
<span class="r-in"><span>                <span class="st">"IAN"</span>,<span class="st">"MALCOLM"</span>,<span class="st">"MALCOLM"</span>,<span class="cn">NA</span>,<span class="st">"ALAN"</span>,<span class="st">"GRANT"</span>,</span></span>
<span class="r-in"><span>                <span class="st">"GRANT"</span>,<span class="st">"GRANT"</span>,<span class="st">"ALAN"</span>,<span class="st">"GRANT"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    postcode <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"HA4 0FF"</span>,</span></span>
<span class="r-in"><span>                 <span class="st">"HA4 0FF"</span>,<span class="st">"HA4 0FF"</span>,<span class="cn">NA</span>,<span class="st">"HA4 0FF"</span>,<span class="st">"HA4 0FF"</span>,</span></span>
<span class="r-in"><span>                 <span class="st">"L3 1DZ"</span>,<span class="st">"L3 1DZ"</span>,<span class="st">"L3 1DZ"</span>,<span class="st">"L3 1DZ"</span>,<span class="cn">NA</span>,<span class="st">"L3 1DZ"</span>,</span></span>
<span class="r-in"><span>                 <span class="st">"BN14 9EP"</span>,<span class="cn">NA</span>,<span class="st">"BN14 9EP"</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,<span class="st">"CW6 9TX"</span>,</span></span>
<span class="r-in"><span>                 <span class="st">"CW6 9TX"</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,<span class="cn">NA</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    specimen_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2024-08-14"</span>,</span></span>
<span class="r-in"><span>                      <span class="st">"2023-02-03"</span>,<span class="st">"2023-02-07"</span>,<span class="st">"2023-02-04"</span>,</span></span>
<span class="r-in"><span>                      <span class="st">"2023-02-09"</span>,<span class="st">"2024-08-14"</span>,<span class="st">"2021-03-28"</span>,<span class="st">"2021-03-28"</span>,</span></span>
<span class="r-in"><span>                      <span class="st">"2021-03-28"</span>,<span class="st">"2021-03-28"</span>,<span class="st">"2021-03-28"</span>,</span></span>
<span class="r-in"><span>                      <span class="st">"2021-03-28"</span>,<span class="st">"2024-07-06"</span>,<span class="st">"2024-07-06"</span>,<span class="st">"2024-07-06"</span>,</span></span>
<span class="r-in"><span>                      <span class="st">"2023-10-31"</span>,<span class="st">"2023-10-31"</span>,<span class="st">"2023-10-31"</span>,</span></span>
<span class="r-in"><span>                      <span class="st">"2022-01-23"</span>,<span class="st">"2022-01-24"</span>,<span class="st">"2022-01-25"</span>,<span class="st">"2022-01-26"</span>,</span></span>
<span class="r-in"><span>                      <span class="st">"2022-01-27"</span>,<span class="st">"2022-01-28"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/data.table/man/setDT.html" class="external-link">setDT</a></span><span class="op">(</span><span class="va">id_test</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">uk_patient_id</span><span class="op">(</span></span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="va">id_test</span>,</span></span>
<span class="r-in"><span>  id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    nhs_number <span class="op">=</span> <span class="st">'nhs_number'</span>,</span></span>
<span class="r-in"><span>    hospital_number <span class="op">=</span> <span class="st">'local_patient_identifier'</span>,</span></span>
<span class="r-in"><span>    date_of_birth <span class="op">=</span> <span class="st">'patient_birth_date'</span>,</span></span>
<span class="r-in"><span>    sex_mfu <span class="op">=</span> <span class="st">'sex'</span>,</span></span>
<span class="r-in"><span>    forename <span class="op">=</span> <span class="st">'forename'</span>,</span></span>
<span class="r-in"><span>    surname <span class="op">=</span> <span class="st">'surname'</span>,</span></span>
<span class="r-in"><span>    postcode <span class="op">=</span> <span class="st">'postcode'</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  .sortOrder <span class="op">=</span> <span class="st">'specimen_date'</span>,</span></span>
<span class="r-in"><span>  .useStages <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">11</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  .keepStages <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  .forceCopy <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">[</span><span class="op">]</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>NHS number is missing or empty</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>NHS number is missing or empty</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>NHS number is missing or empty</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>NHS number is missing or empty</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>NHS number is missing or empty</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>NHS number is missing or empty</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>NHS number is missing or empty</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>NHS number is missing or empty</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>NHS number is missing or empty</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        id        stageMatch record_id nhs_number local_patient_identifier</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;int&gt;            &lt;char&gt;     &lt;int&gt;     &lt;char&gt;                   &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:     1 s2s4s5s6s7s8s9s10         7 9435773982                   KR2535</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:     1           s5s7s10         8       &lt;NA&gt;                   KR2535</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:     1                s2         9 9999999999                   KR2535</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:     1             s7s10        10       &lt;NA&gt;                     &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:     1              s4s7        11 9435773982                     &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:     1       s6s7s8s9s10        12       &lt;NA&gt;                     &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:    11              s6s9        19       &lt;NA&gt;                     &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:    11          s6s7s8s9        20 3333333333                     &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:    11      s2s5s6s7s8s9        21       &lt;NA&gt;                  JH45204</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:    11        s2s6s7s8s9        22 9999999999                  HS45202</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11:    11          s1s2s6s9        23 9435817777                  HS45202</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:    11    s1s2s5s6s7s8s9        24 9435817777                  JH45204</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13:    13     s1s2s5s6s9s10         2 9435754422                  IG12067</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14:    13                s1         4 9435754422                     &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15:    13             s6s10         3       &lt;NA&gt;                     &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16:    13       s2s5s6s9s10         5 5555555555                  IG12067</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17:    13                s1         1 9435754422                     &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18:    13             s5s10         6       &lt;NA&gt;                  IG12067</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19:    18                s3        18 9435802508                   UK8734</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20:    18       s6s7s8s9s11        16       &lt;NA&gt;                     &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21:    18     s3s6s7s8s9s11        17 9435802508                   UK8734</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22:    18                s3        13 9435802508                   UK8734</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23:    18                s3        14 9435802508                   UK8734</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24:    18               s11        15       &lt;NA&gt;                     &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        id        stageMatch record_id nhs_number local_patient_identifier</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;int&gt;            &lt;char&gt;     &lt;int&gt;     &lt;char&gt;                   &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     patient_birth_date    sex forename surname postcode specimen_date</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 &lt;char&gt; &lt;char&gt;   &lt;char&gt;  &lt;char&gt;   &lt;char&gt;        &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:         1967-02-10      F    ELLIE SATTLER    L31DZ    2021-03-28</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:               &lt;NA&gt;      F    ELLIE SATTLER    L31DZ    2021-03-28</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:         1967-02-10      F     &lt;NA&gt;    &lt;NA&gt;    L31DZ    2021-03-28</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:               &lt;NA&gt;      F    ELLIE SATTLER    L31DZ    2021-03-28</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:               &lt;NA&gt;      F    ELLIE SATTLER     &lt;NA&gt;    2021-03-28</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:         1967-02-10      F    ELLIE SATTLER    L31DZ    2021-03-28</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:         1947-09-14      M    GRANT    ALAN   CW69TX    2022-01-23</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:         1947-09-14      M     ALAN   GRANT   CW69TX    2022-01-24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:         1947-09-14      M     ALAN   GRANT     &lt;NA&gt;    2022-01-25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:         1947-09-14      M     ALAN   GRANT     &lt;NA&gt;    2022-01-26</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11:         1947-09-14   &lt;NA&gt;    GRANT    ALAN     &lt;NA&gt;    2022-01-27</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:         1947-09-14      M     ALAN   GRANT     &lt;NA&gt;    2022-01-28</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13:         1993-07-16      M   DENNIS   NEDRY   HA40FF    2023-02-03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14:         1993-07-16      M     &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt;    2023-02-04</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15:         1993-07-16      M     &lt;NA&gt;   NEDRY   HA40FF    2023-02-07</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16:         1993-07-16   &lt;NA&gt;   DENNIS   NEDRY   HA40FF    2023-02-09</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17:         1993-07-16      M     &lt;NA&gt;    &lt;NA&gt;   HA40FF    2024-08-14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18:               &lt;NA&gt;      M     &lt;NA&gt;   NEDRY   HA40FF    2024-08-14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19:               &lt;NA&gt;      M     &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt;    2023-10-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20:         1952-10-22      M      IAN MALCOLM     &lt;NA&gt;    2023-10-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21:         1952-10-22      M      IAN MALCOLM     &lt;NA&gt;    2023-10-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22:               &lt;NA&gt;      M      IAN       M  BN149EP    2024-07-06</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23:               &lt;NA&gt;      M      IAN    &lt;NA&gt;     &lt;NA&gt;    2024-07-06</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24:         1952-10-22      M  MALCOLM     IAN  BN149EP    2024-07-06</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     patient_birth_date    sex forename surname postcode specimen_date</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 &lt;char&gt; &lt;char&gt;   &lt;char&gt;  &lt;char&gt;   &lt;char&gt;        &lt;char&gt;</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Alex Bhattacharya, Alice Graham, Harshana Liyanage, Frederick Sloots, Emma Parker.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

